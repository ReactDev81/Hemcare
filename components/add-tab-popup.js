import { View, Text, Pressable} from "react-native";
import React, { useState } from 'react';
import Svg, { Path} from 'react-native-svg';
import RecordBleed from "./modal-screens/record-bleed";

const BleedIcon = ({color, width, height}) => {
    return(
        <Svg width={width} height={height} viewBox="0 0 18 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <Path d="M9.58377 1.85675C14.811 6.74388 17.1819 12.1975 16.9891 16.2735C16.8937 18.2906 16.1778 19.9426 14.9099 21.0951C13.6386 22.2505 11.7059 23 8.99978 23C6.29369 23 4.36108 22.2505 3.08988 21.0951C1.822 19.9427 1.10623 18.2907 1.01088 16.2736C0.818224 12.1975 3.18925 6.74389 8.41639 1.85676C8.74553 1.54903 9.25463 1.54903 9.58377 1.85675Z" stroke={color} stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <Path d="M13 13C14 15.7692 13 18.5385 10 19.4615" stroke={color} stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </Svg>
    )
}

const AddTreatmentIcon = () => {
    return(
        <Svg width="15" height="17" viewBox="0 0 13 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <Path d="M4.625 5.625C4.625 5.45924 4.69085 5.30027 4.80806 5.18306C4.92527 5.06585 5.08424 5 5.25 5H5.875V4.375C5.875 4.20924 5.94085 4.05027 6.05806 3.93306C6.17527 3.81585 6.33424 3.75 6.5 3.75C6.66576 3.75 6.82473 3.81585 6.94194 3.93306C7.05915 4.05027 7.125 4.20924 7.125 4.375V5H7.75C7.91576 5 8.07473 5.06585 8.19194 5.18306C8.30915 5.30027 8.375 5.45924 8.375 5.625C8.375 5.79076 8.30915 5.94973 8.19194 6.06694C8.07473 6.18415 7.91576 6.25 7.75 6.25H7.125V6.875C7.125 7.04076 7.05915 7.19973 6.94194 7.31694C6.82473 7.43415 6.66576 7.5 6.5 7.5C6.33424 7.5 6.17527 7.43415 6.05806 7.31694C5.94085 7.19973 5.875 7.04076 5.875 6.875V6.25H5.25C5.08424 6.25 4.92527 6.18415 4.80806 6.06694C4.69085 5.94973 4.625 5.79076 4.625 5.625ZM9 8.75H4C3.83424 8.75 3.67527 8.81585 3.55806 8.93306C3.44085 9.05027 3.375 9.20924 3.375 9.375C3.375 9.54076 3.44085 9.69973 3.55806 9.81694C3.67527 9.93415 3.83424 10 4 10H9C9.16576 10 9.32473 9.93415 9.44194 9.81694C9.55915 9.69973 9.625 9.54076 9.625 9.375C9.625 9.20924 9.55915 9.05027 9.44194 8.93306C9.32473 8.81585 9.16576 8.75 9 8.75ZM6.5 11.25H4C3.83424 11.25 3.67527 11.3158 3.55806 11.4331C3.44085 11.5503 3.375 11.7092 3.375 11.875C3.375 12.0408 3.44085 12.1997 3.55806 12.3169C3.67527 12.4342 3.83424 12.5 4 12.5H6.5C6.66576 12.5 6.82473 12.4342 6.94194 12.3169C7.05915 12.1997 7.125 12.0408 7.125 11.875C7.125 11.7092 7.05915 11.5503 6.94194 11.4331C6.82473 11.3158 6.66576 11.25 6.5 11.25ZM12.125 4.375V11.875C12.124 12.7035 11.7944 13.4978 11.2086 14.0836C10.6228 14.6694 9.8285 14.999 9 15H4C3.1715 14.999 2.37722 14.6694 1.79139 14.0836C1.20555 13.4978 0.875992 12.7035 0.875 11.875V4.375C0.875992 3.5465 1.20555 2.75222 1.79139 2.16639C2.37722 1.58055 3.1715 1.25099 4 1.25H4.10687C4.23661 0.884682 4.47619 0.568444 4.79274 0.344652C5.1093 0.12086 5.48733 0.000472967 5.875 0L7.125 0C7.51267 0.000472967 7.8907 0.12086 8.20726 0.344652C8.52381 0.568444 8.76339 0.884682 8.89313 1.25H9C9.8285 1.25099 10.6228 1.58055 11.2086 2.16639C11.7944 2.75222 12.124 3.5465 12.125 4.375ZM10.875 4.375C10.875 3.87772 10.6775 3.40081 10.3258 3.04917C9.97419 2.69754 9.49728 2.5 9 2.5H8.375C8.20924 2.5 8.05027 2.43415 7.93306 2.31694C7.81585 2.19973 7.75 2.04076 7.75 1.875C7.75 1.70924 7.68415 1.55027 7.56694 1.43306C7.44973 1.31585 7.29076 1.25 7.125 1.25H5.875C5.70924 1.25 5.55027 1.31585 5.43306 1.43306C5.31585 1.55027 5.25 1.70924 5.25 1.875C5.25 2.04076 5.18415 2.19973 5.06694 2.31694C4.94973 2.43415 4.79076 2.5 4.625 2.5H4C3.50272 2.5 3.02581 2.69754 2.67417 3.04917C2.32254 3.40081 2.125 3.87772 2.125 4.375V11.875C2.125 12.3723 2.32254 12.8492 2.67417 13.2008C3.02581 13.5525 3.50272 13.75 4 13.75H9C9.49728 13.75 9.97419 13.5525 10.3258 13.2008C10.6775 12.8492 10.875 12.3723 10.875 11.875V4.375Z" fill="#14B8A6"/>
        </Svg>
    )
}

const ProphylexisIcon = () => {
    return(
        <Svg width="16" height="17" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <Path d="M13.6665 3.15616L10.7856 0.167775C10.6769 0.0589034 10.5314 -0.00133917 10.3803 2.25938e-05C10.2292 0.00138435 10.0847 0.0642415 9.97791 0.175056C9.87108 0.28587 9.81049 0.435775 9.80917 0.592484C9.80786 0.749193 9.86594 0.900168 9.97089 1.01289L11.004 2.08453L10.1478 2.97088C9.59441 2.54941 8.91414 2.34677 8.22951 2.39948C7.54488 2.45219 6.9009 2.75677 6.41358 3.25837L2.91677 6.88746C2.54115 7.27501 2.24335 7.73598 2.0406 8.24371C1.83786 8.75143 1.73419 9.29582 1.73561 9.84537V11.6982L0.1759 13.3167C0.120869 13.3718 0.0769747 13.4378 0.0467779 13.5107C0.0165811 13.5836 0.000686556 13.662 2.17545e-05 13.7414C-0.000643047 13.8208 0.0139352 13.8995 0.0429058 13.9729C0.0718765 14.0464 0.114659 14.1131 0.168758 14.1692C0.222857 14.2253 0.287188 14.2697 0.357998 14.2998C0.428808 14.3298 0.504678 14.3449 0.581183 14.3442C0.657687 14.3435 0.733293 14.3271 0.803588 14.2957C0.873884 14.2644 0.937462 14.2189 0.990613 14.1618L2.55032 12.5439H4.33647C4.86625 12.5454 5.39105 12.4378 5.88051 12.2275C6.36997 12.0172 6.81435 11.7083 7.18796 11.3186L10.6865 7.68955C11.1704 7.18466 11.4644 6.51693 11.5153 5.80692C11.5662 5.09691 11.3708 4.39141 10.9642 3.81779L11.8187 2.92964L12.8518 4.00128C12.9604 4.11015 13.106 4.17039 13.2571 4.16903C13.4081 4.16767 13.5526 4.10481 13.6595 3.994C13.7663 3.88318 13.8269 3.73328 13.8282 3.57657C13.8295 3.41986 13.7714 3.26889 13.6665 3.15616ZM9.87236 6.84443L6.37382 10.4735C6.10695 10.7518 5.78953 10.9724 5.43991 11.1226C5.0903 11.2728 4.71545 11.3496 4.33704 11.3485H2.88796V9.84537C2.88814 9.64956 2.90647 9.45421 2.9427 9.26204L3.63411 9.97925C3.68726 10.0363 3.75084 10.0819 3.82113 10.1132C3.89143 10.1445 3.96703 10.161 4.04354 10.1617C4.12004 10.1624 4.19591 10.1473 4.26672 10.1172C4.33753 10.0872 4.40186 10.0428 4.45596 9.98666C4.51006 9.93054 4.55284 9.86381 4.58181 9.79036C4.61079 9.7169 4.62536 9.6382 4.6247 9.55884C4.62403 9.47948 4.60814 9.40106 4.57794 9.32814C4.54775 9.25522 4.50385 9.18927 4.44882 9.13413L3.4457 8.09358C3.53255 7.96642 3.62887 7.84651 3.73379 7.73497L4.3284 7.11339L5.36148 8.18502C5.47015 8.29389 5.61569 8.35414 5.76677 8.35277C5.91784 8.35141 6.06235 8.28856 6.16918 8.17774C6.276 8.06693 6.3366 7.91702 6.33791 7.76031C6.33923 7.6036 6.28115 7.45263 6.1762 7.33991L5.14311 6.26827L6.05693 5.32035L7.09001 6.39199C7.19868 6.50086 7.34422 6.5611 7.49529 6.55974C7.64636 6.55838 7.79088 6.49552 7.89771 6.38471C8.00453 6.27389 8.06513 6.12399 8.06644 5.96728C8.06775 5.81057 8.00968 5.6596 7.90472 5.54687L6.87164 4.47524L7.23002 4.10348C7.55935 3.77764 7.99698 3.59585 8.45209 3.59585C8.9072 3.59585 9.34484 3.77764 9.67416 4.10348L9.87236 4.30908C10.1964 4.64533 10.3785 5.10131 10.3785 5.57676C10.3785 6.05221 10.1964 6.50819 9.87236 6.84443Z" fill="#A855F7"/>
        </Svg>
    )
}

const AddTabPopup = () => {

    const [isModalVisible, setIsModalVisible] = useState(false);
    
    return(
        <View className="absolute bottom-0 left-0 right-0 bg-[#151F3199] items-center justify-end w-full h-full z-10">
            <View className="bg-white rounded-[20px] py-4 px-3 items-start w-52 mb-[120px]">
                <View className="absolute -bottom-2.5 left-[95px] w-5 h-5 bg-white rotate-45"/>
                <Pressable onPress={() => setIsModalVisible(true)} className="bg-gray-light p-1.5 rounded-[20px] flex flex-row items-center justify-start w-full">
                    <View className="w-8 h-8 rounded-full bg-red-light items-center justify-center">
                        <BleedIcon width="14px" height="17px" color="#F43F5E" />
                    </View>
                    <Text className="text-blue-light text-sm leading-4 ml-[8px]">Record Bleed</Text>
                </Pressable>
                <Pressable className="p-1.5 rounded-[20px] mt-1.5 flex flex-row items-center justify-start w-full">
                    <View className="w-8 h-8 rounded-full bg-green-light items-center justify-center">
                        <AddTreatmentIcon />
                    </View>
                    <Text className="text-gray-dark text-sm leading-4 ml-[8px]">Add Treatment</Text>
                </Pressable>
                <Pressable className="p-1.5 rounded-[20px] mt-1.5 flex flex-row items-center justify-start w-full">
                    <View className="w-8 h-8 rounded-full bg-[#F2EAFF] items-center justify-center">
                        <ProphylexisIcon />
                    </View>
                    <Text className="text-gray-dark text-sm leading-4 ml-[8px]">Add Prophylaxis</Text>
                </Pressable>
            </View>
            <RecordBleed 
                visible={isModalVisible} 
                onClose={() => setIsModalVisible(false)} 
            />
        </View>
    )
}

export default AddTabPopup;